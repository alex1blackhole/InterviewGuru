
JavaScript โย**ะฐัะธะฝััะพะฝะฝัะน ะพะดะฝะพะฟะพัะพัะฝัะน**ยัะทัะบ, ะฝะพ ะฑัะฐัะทะตั ะฟัะตะดะพััะฐะฒะปัะตัย**API**, ะบะพัะพััะน ัะฐัะฟัะตะดะตะปัะตั ะฒัะทะพะฒั ะฟะพ ะพัะตัะตะดัะผ.

ะกััะตััะฒัะตั ะดะฒะฐ ัะธะฟะฐ ะทะฐะดะฐั:

- **Microtasks (ะผะธะบัะพะทะฐะดะฐัะธ)**
    
- **Macrotasks (ะผะฐะบัะพะทะฐะดะฐัะธ)**
    

### **ะะฐะบ ัะฐะฑะพัะฐะตั Event Loop?**

ะญัะพย**ะฑะตัะบะพะฝะตัะฝัะน ัะธะบะป**, ะบะพัะพััะน ะพะถะธะดะฐะตั ัะพะฑััะธั ะธ ะพะฑัะฐะฑะฐััะฒะฐะตั ะธั.

1. **Microtasks**ย(ะฒัััะธะน ะฟัะธะพัะธัะตั):
    
    - ะะฑัะฐะฑะฐััะฒะฐััััย**ะฟะตัะฒัะผะธ**ยะฒ ัะฐะผะบะฐั ัะตะบััะตะณะพ ัะธะบะฐ Event Loop.
        
    - ะกัะดะฐ ะฟะพะฟะฐะดะฐัั:
        
        - ะัะพะผะธัั (`Promise`)
            
        - `async/await`
            
        - `queueMicrotask()`
            
2. **Macrotasks**ย(ะฝะธะทัะธะน ะฟัะธะพัะธัะตั):
    
    - ะัะฟะพะปะฝัััััย**ะฟะพัะปะต**ยะฒัะตั ะผะธะบัะพะทะฐะดะฐั.
        
    - ะกัะดะฐ ะฟะพะฟะฐะดะฐัั:
        
        - `setTimeout`,ย`setInterval`
            
        - `requestAnimationFrame`
            
        - I/O-ะพะฟะตัะฐัะธะธ
            

### **ะะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั**

1. ะัะฟะพะปะฝัะตัััย**ัะธะฝััะพะฝะฝัะน ะบะพะด**ย(ะตัะปะธ ะตััั).
    
2. ะะฑัะฐะฑะฐััะฒะฐััััย**ะฒัะต ะผะธะบัะพะทะฐะดะฐัะธ**ย(ะตัะปะธ ะพะฝะธ ะตััั ะฒ ะพัะตัะตะดะธ).
    
3. ะัะฟะพะปะฝัะตัััย**ะพะดะฝะฐ ะผะฐะบัะพะทะฐะดะฐัะฐ**ย(ะตัะปะธ ะตััั).
    
4. ะฆะธะบะป ะฟะพะฒัะพััะตััั.

- ะัะปะธ ะฒะพ ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะผะฐะบัะพะทะฐะดะฐัะธ ะฟะพัะฒะปััััั ะฝะพะฒัะต ะผะธะบัะพะทะฐะดะฐัะธ, ะพะฝะธ ะฑัะดัั ะพะฑัะฐะฑะพัะฐะฝัย**ััะฐะทั**, ะฟัะตะถะดะต ัะตะผ Event Loop ะฟะตัะตะนะดะตั ะบ ัะปะตะดัััะตะน ะผะฐะบัะพะทะฐะดะฐัะต.
    
- ะะตัะผะพััั ะฝะฐ ะฐัะธะฝััะพะฝะฝะพััั, JavaScriptย**ะณะฐัะฐะฝัะธััะตั ะฟะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั**ยะฑะปะฐะณะพะดะฐัั ะฟัะธะพัะธัะตัั ะผะธะบัะพะทะฐะดะฐั.
- 

https://www.jsv9000.app/



Node.js ะธัะฟะพะปัะทัะตัย**6 ัะฐะท**ยEvent Loop (ัะตะฐะปะธะทะฐัะธั ัะตัะตะท ะฑะธะฑะปะธะพัะตะบัย`libuv`). ะะฝะธ ะฒัะฟะพะปะฝััััั ะฒ ัััะพะณะพะผ ะฟะพััะดะบะต, ะธ ะบะฐะถะดะฐั ัะฐะทะฐ ะพะฑัะฐะฑะฐััะฒะฐะตั ัะฒะพะน ัะธะฟ ะทะฐะดะฐั.

## **1. Timers (ะขะฐะนะผะตัั)**

**ะงัะพ ะพะฑัะฐะฑะฐััะฒะฐะตั:**

- ะะพะปะปะฑัะบะธย`setTimeout()`ยะธย`setInterval()`.
    

**ะะฐะบ ัะฐะฑะพัะฐะตั:**

- ะัะพะฒะตััะตั, ะธััะตะบ ะปะธ ัะฐะนะผะตั.
    
- ะัะฟะพะปะฝัะตั ะบะพะปะปะฑัะบะธ, ััั ะฒัะตะผั ะฒััะปะพ.
    

โ๏ธย**ะะฐะถะฝะพ:**

- ะขะฐะนะผะตััย**ะฝะต ะณะฐัะฐะฝัะธัััั ัะพัะฝะพะต ะฒัะตะผั**ยะฒัะฟะพะปะฝะตะฝะธั (ะทะฐะดะตัะถะบะฐ ะฒะพะทะผะพะถะฝะฐ ะธะท-ะทะฐ ะดััะณะธั ัะฐะท).
    
- `setImmediate()`ยะทะดะตััย**ะฝะต ะฒัะฟะพะปะฝัะตััั**ย(ััะพ ัะปะตะดัััะฐั ัะฐะทะฐ).

## **2. Pending Callbacks (ะัะปะพะถะตะฝะฝัะต ะบะพะปะปะฑัะบะธ)**

**ะงัะพ ะพะฑัะฐะฑะฐััะฒะฐะตั:**

- ะกะธััะตะผะฝัะต ะพะฟะตัะฐัะธะธ (ะฝะฐะฟัะธะผะตั, ะพัะธะฑะบะธ ัะตัะธ,ย`TCP ECONNREFUSED`).

```js 
const socket = net.connect(80, 'nonexistent-host');
socket.on('error', (err) => console.log('ะัะธะฑะบะฐ!')); // ะัะฟะพะปะฝะธััั ะทะดะตัั
```


## **3. Idle, Prepare (ะะฝัััะตะฝะฝะธะต ะพะฟะตัะฐัะธะธ)**

ะคะฐะทะฐ ะดะปั ะฒะฝัััะตะฝะฝะธั ะฟัะพัะตััะพะฒ Node.js (ะพะฑััะฝะพ ะฝะต ะธัะฟะพะปัะทัะตััั ะฒ ะบะพะดะต).

## **4. Poll (ะะฟัะพั ะฝะพะฒัั ัะพะฑััะธะน)**

**ะกะฐะผะฐั ะฒะฐะถะฝะฐั ัะฐะทะฐ**ย(ะทะดะตัั ััะฐัะธััั ะฑะพะปััะต ะฒัะตะณะพ ะฒัะตะผะตะฝะธ).

**ะงัะพ ะดะตะปะฐะตั:**

1. **ะัะพะฒะตััะตั I/O-ะบะพะปะปะฑัะบะธ**ย(ะฝะฐะฟัะธะผะตั, ะพัะฒะตัั ะพั ัะตัะฒะตัะฐ, ััะตะฝะธะต ัะฐะนะปะพะฒ).
    
2. **ะัะปะธ ะพัะตัะตะดั ะฟัััะฐ:**
    
    - ะะดัั ะฝะพะฒัะต ะทะฐะดะฐัะธ (ะฝะฐะฟัะธะผะตั, ะฒัะพะดััะธะต HTTP-ะทะฐะฟัะพัั).
        
    - ะะพะถะตั ะฟะตัะตะนัะธ ะบย`setImmediate()`, ะตัะปะธ ะตััั ัะฐะบะธะต ะทะฐะดะฐัะธ.
        

**ะัะธะผะตั:**

```js 
fs.readFile('file.txt', () => {
  console.log('I/O ะทะฐะฒะตัััะฝ!'); // ะัะฟะพะปะฝะธััั ะทะดะตัั
});
```


## **5. Check (`setImmediate`)**

**ะงัะพ ะพะฑัะฐะฑะฐััะฒะฐะตั:**

- ะะพะปะปะฑัะบะธย`setImmediate()`.
    

**ะัะปะธัะธะต ะพัย`setTimeout(..., 0)`:**

|`setImmediate()`|`setTimeout(..., 0)`|
|---|---|
|ะัะฟะพะปะฝัะตััั ะฒย**ัะฐะทะต Check**|ะัะฟะพะปะฝัะตััั ะฒย**ัะฐะทะต Timers**|
|ะััััะตะต ะฟัะธย**ะทะฐะฟััะบะต ะฒะฝัััะธ I/O-ัะธะบะปะฐ**|ะะตะดะปะตะฝะฝะตะต ะฒ ััะพะผ ัะปััะฐะต|

```js 
fs.readFile('file.txt', () => {
  setTimeout(() => console.log('Timeout'), 0);  
  setImmediate(() => console.log('Immediate')); // ะัะฟะพะปะฝะธััั ะฟะตัะฒัะผ!
});
```

## **6. Close Callbacks (ะะฐะบัััะธะต ัะพะตะดะธะฝะตะฝะธะน)**

**ะงัะพ ะพะฑัะฐะฑะฐััะฒะฐะตั:**

- ะกะพะฑััะธัย`'close'`ย(ะฝะฐะฟัะธะผะตั,ย`socket.on('close', ...)`).
    

**ะัะธะผะตั:**

```js 
const server = net.createServer();
server.on('connection', (socket) => {
  socket.on('close', () => console.log('ะกะพะตะดะธะฝะตะฝะธะต ะทะฐะบัััะพ!')); // ะะดะตัั
});
```

### **ะัะฒะพะด**

- **Event Loop ะฒ Node.js ัะปะพะถะฝะตะต, ัะตะผ ะฒ ะฑัะฐัะทะตัะต**ย(6 ัะฐะท ะฟัะพัะธะฒ ะพะดะฝะพะน ะพัะตัะตะดะธ).
    
- **`setImmediate`ยvsย`setTimeout(0)`**ยโ ัะฐะทะฝะธัะฐ ะฒะธะดะฝะฐ ัะพะปัะบะพ ะฒะฝัััะธ I/O-ะพะฟะตัะฐัะธะน.
    
- **ะะธะบัะพะทะฐะดะฐัะธ (`Promise`,ย`nextTick`)**ยะธะผะตัั ะฟัะธะพัะธัะตั ะฝะฐะด ะผะฐะบัะพะทะฐะดะฐัะฐะผะธ.
    

ะัะปะธ ะฝัะถะฝะพ ะทะฐะฟะพะผะฝะธัั:

> **"Timers โ Pending โ Poll โ Check โ Close, ะฐย`nextTick`ยะธ ะัะพะผะธัั โ ะฒะตะทะดะต!"**

ะะพะปะตะทะฝะพ ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ ะฐัะธะฝััะพะฝะฝะพะณะพ ะบะพะดะฐ ะธ ะดะตะฑะฐะณะฐ ัะปะพะถะฝัั ััะตะฝะฐัะธะตะฒ. ๐