
**useLayoutEffect**¬†‚Äî —ç—Ç–æ —Ö—É–∫, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM, –Ω–æ –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä –≤—ã–ø–æ–ª–Ω–∏—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É (paint).

```js
useLayoutEffect(() => {
  // –ö–æ–¥ —ç—Ñ—Ñ–µ–∫—Ç–∞
  return () => {
    // –û—á–∏—Å—Ç–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞
  };
}, [dependencies]);
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- **–°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**¬†‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
    
- **–§–∞–∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**¬†‚Äî –º–µ–∂–¥—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º DOM –∏ –µ–≥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π
    
- **–ê–Ω–∞–ª–æ–≥ –≤ –∫–ª–∞—Å—Å–∞—Ö**¬†‚Äî¬†`componentDidMount`¬†–∏¬†`componentDidUpdate`
    

## üí°¬†**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### 1. –ò–∑–º–µ—Ä–µ–Ω–∏–µ DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤

```js
function Tooltip({ children }) {
  const ref = useRef(null);
  const [width, setWidth] = useState(0);

  useLayoutEffect(() => {
    if (ref.current) {
      // –ü–æ–ª—É—á–∞–µ–º —Ç–æ—á–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
      setWidth(ref.current.offsetWidth);
    }
  }, []);

  return <div ref={ref}>{children} (Width: {width}px)</div>;
}
```

### 2. –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã

```js
function FadeIn({ children }) {
  const ref = useRef(null);

  useLayoutEffect(() => {
    const node = ref.current;
    node.style.transition = 'opacity 300ms';
    node.style.opacity = '0';
    
    // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π
    requestAnimationFrame(() => {
      node.style.opacity = '1';
    });
  }, []);

  return <div ref={ref}>{children}</div>;
}
```

### 3. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ "–º–∏–≥–∞–Ω–∏—è" –∫–æ–Ω—Ç–µ–Ω—Ç–∞


```js
function Modal({ isOpen }) {
  const ref = useRef(null);

  useLayoutEffect(() => {
    if (isOpen) {
      // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
      positionModal(ref.current);
    }
  }, [isOpen]);

  return isOpen ? <div ref={ref}>Modal Content</div> : null;
}
```

## üÜö¬†**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ useLayoutEffect –∏ useEffect**

|–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞|useLayoutEffect|useEffect|
|---|---|---|
|**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**|–î–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏|–ü–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏|
|**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞**|–ë–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É|–ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç|
|**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**|–ò–∑–º–µ—Ä–µ–Ω–∏—è, –∞–Ω–∏–º–∞—Ü–∏–∏|–ó–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥–ø–∏—Å–∫–∏|
|**–°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥**|–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ|–ë–µ–∑ –ø—Ä–æ–±–ª–µ–º|

## ‚ö†Ô∏è¬†**–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏**

### 1. –ò–∑–ª–∏—à–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```js
// –ü–ª–æ—Ö–æ (–∑–∞–º–µ–¥–ª—è–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
useLayoutEffect(() => {
  document.title = 'New Title';
}, []);
```
**–†–µ—à–µ–Ω–∏–µ:**¬†–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–π¬†`useEffect`¬†–¥–ª—è —Ç–∞–∫–∏—Ö –∑–∞–¥–∞—á

### 2. –î–æ–ª–≥–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

```js
// –û–ø–∞—Å–Ω–æ (–±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
useLayoutEffect(() => {
  performHeavyCalculation(); // –ú–æ–∂–µ—Ç –∑–∞–º–æ—Ä–æ–∑–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
}, []);
```
**–†–µ—à–µ–Ω–∏–µ:**¬†–í—ã–Ω–æ—Å–∏—Ç–µ —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤¬†`useEffect`¬†–∏–ª–∏ Web Workers

### 3. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã

```js
// –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–∞–≤–∏—Å–∞–Ω–∏—é
useLayoutEffect(() => {
  setState(newValue); // –ï—Å–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä
});
```


**–†–µ—à–µ–Ω–∏–µ:**¬†–í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## üèÜ¬†**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã**

### 1. –ê–≤—Ç–æ–ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ –≤—ã—Å–æ—Ç—ã textarea

```js
function AutoTextarea() {
  const ref = useRef(null);
  
  useLayoutEffect(() => {
    const textarea = ref.current;
    textarea.style.height = 'auto';
    textarea.style.height = `${textarea.scrollHeight}px`;
  }, [value]);

  return <textarea ref={ref} value={value} onChange={...} />;
}
```

### 2. –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ —Å—Ç–∏–ª–µ–π

```js
function ThemedComponent() {
  useLayoutEffect(() => {
    const style = document.createElement('style');
    style.innerHTML = `.theme { color: red }`;
    document.head.appendChild(style);
    
    return () => document.head.removeChild(style);
  }, []);
}
```

## üìä¬†**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useLayoutEffect?**

‚úî¬†**–ò–∑–º–µ—Ä–µ–Ω–∏–µ DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤**  
‚úî¬†**–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**  
‚úî¬†**–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ "–º–∏–≥–∞–Ω–∏—è"**  
‚úî¬†**–ê–Ω–∏–º–∞—Ü–∏–∏, —Ç—Ä–µ–±—É—é—â–∏–µ —Ç–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏**

‚ùå¬†**–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:**

- –ó–∞–ø—Ä–æ—Å–æ–≤ –¥–∞–Ω–Ω—ã—Ö
    
- –ü–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
    
- –õ—é–±—ã—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
    
- –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useEffect
    

## üöÄ¬†**–í—ã–≤–æ–¥**

**useLayoutEffect**¬†‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM –ø–µ—Ä–µ–¥ –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ**¬†‚Äî –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É
    
2. **–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞**¬†–Ω—É–∂–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ DOM-–∏–∑–º–µ–Ω–µ–Ω–∏—è
    
3. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**¬†–ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –æ–±—ã—á–Ω—ã–π¬†`useEffect`

```js
// –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
useLayoutEffect(() => {
  const width = element.current.offsetWidth;
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º width –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
}, [deps]);
```