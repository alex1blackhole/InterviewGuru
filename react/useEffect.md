
**useEffect**¬†‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö React. –û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ (paint) –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

```js
useEffect(() => {
  // –ö–æ–¥ —ç—Ñ—Ñ–µ–∫—Ç–∞
  return () => {
    // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏
  };
}, [dependencies]);
```

## üí°¬†**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**

1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**¬†‚Äî –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É
    
2. **–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ**¬†commit —Ñ–∞–∑—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
    
3. **–ê–Ω–∞–ª–æ–≥ –≤ –∫–ª–∞—Å—Å–∞—Ö**¬†‚Äî¬†`componentDidMount`,¬†`componentDidUpdate`¬†–∏¬†`componentWillUnmount`¬†–≤–º–µ—Å—Ç–µ –≤–∑—è—Ç—ã–µ
    

## üÜö¬†**useEffect vs useLayoutEffect**

|–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞|useEffect|useLayoutEffect|
|---|---|---|
|**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**|–ü–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏|–î–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏|
|**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ UI**|–ù–µ—Ç|–î–∞|
|**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**|99% —Å–ª—É—á–∞–µ–≤|–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ DOM-–æ–ø–µ—Ä–∞—Ü–∏–∏|
|**SSR**|–ë–µ–∑ –ø—Ä–æ–±–ª–µ–º|–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ|

## ‚ö†Ô∏è¬†**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è**

### 1. –ú–µ—Ä—Ü–∞–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö DOM

```js
// –ü—Ä–æ–±–ª–µ–º–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
useEffect(() => {
  if (ref.current) {
    ref.current.style.color = 'red'; // –í–∏–¥–Ω–æ –º–µ—Ä—Ü–∞–Ω–∏–µ
  }
}, []);
```
**–†–µ—à–µ–Ω–∏–µ:**¬†–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ¬†`useLayoutEffect`¬†–¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π


### 2. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã

```js
// –û—à–∏–±–∫–∞: —ç—Ñ—Ñ–µ–∫—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç —ç—Ñ—Ñ–µ–∫—Ç
useEffect(() => {
  setCount(count + 1); // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
}, [count]); // –¢–æ–∂–µ –ø—Ä–æ–±–ª–µ–º–∞, –µ—Å–ª–∏ setCount –º–µ–Ω—è–µ—Ç count
```
**–†–µ—à–µ–Ω–∏–µ:**¬†–ü—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É¬†`setCount`

### 3. –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

```js
// –û—à–∏–±–∫–∞: –Ω–µ –æ—Ç–ø–∏—Å—ã–≤–∞–µ–º—Å—è –æ—Ç —Å–æ–±—ã—Ç–∏–π
useEffect(() => {
  window.addEventListener('resize', handleResize);
}, []);
```
**–†–µ—à–µ–Ω–∏–µ:**¬†–í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏

```js
useEffect(() => {
  window.addEventListener('resize', handleResize);
  return () => window.removeEventListener('resize', handleResize);
}, []);
```

## üèÜ¬†**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### 1. –ó–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö

```js
useEffect(() => {
  let ignore = false;
  
  async function fetchData() {
    const result = await api.fetch(id);
    if (!ignore) setData(result);
  }

  fetchData();
  
  return () => { ignore = true; };
}, [id]);
```

### 2. –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è

```js
useEffect(() => {
  const handler = () => console.log('Clicked!');
  document.addEventListener('click', handler);
  
  return () => document.removeEventListener('click', handler);
}, []);
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏

```js
useEffect(() => {
  const chart = new ChartJS(ref.current, config);
  
  return () => chart.destroy();
}, [data]);
```

## üìä¬†**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useEffect?**

‚úî¬†**–ó–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö**  
‚úî¬†**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫**  
‚úî¬†**–†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ DOM**¬†(–∫–æ–≥–¥–∞ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –º–µ—Ä—Ü–∞–Ω–∏–µ)  
‚úî¬†**–ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–π**  
‚úî¬†**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

## üöÄ¬†**–í—ã–≤–æ–¥**

**useEffect**¬†‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:

1. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**¬†–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ¬†`useEffect`
    
2. **–î–ª—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π**¬†‚Äî –æ—Ü–µ–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å¬†`useLayoutEffect`
    
3. **–í—Å–µ–≥–¥–∞**¬†–æ—á–∏—â–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã
    
4. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**¬†—É–∫–∞–∑—ã–≤–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```js
// –ò–¥–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
useEffect(() => {
  // –≠—Ñ—Ñ–µ–∫—Ç
  return () => {
    // –û—á–∏—Å—Ç–∫–∞
  };
}, [dep1, dep2]); // –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```