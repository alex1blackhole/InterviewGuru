
## üîç¬†**Dependency Injection (–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)**

**Dependency Injection**¬†‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Å–µ—Ä–≤–∏—Å—ã, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã) –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–ª–∞—Å—Å –∏–∑–≤–Ω–µ, –∞ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ.

### üìå¬†**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

```js
// –ë–µ–∑ DI
class UserService {
  private logger = new FileLogger(); // –ñ–µ—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
  
  saveUser(user: User) {
    this.logger.log(`Saving user ${user.name}`);
    // ...
  }
}

// –° DI
class UserService {
  constructor(private logger: ILogger) {} // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤–Ω–µ–¥—Ä—è–µ—Ç—Å—è –∏–∑–≤–Ω–µ
  
  saveUser(user: User) {
    this.logger.log(`Saving user ${user.name}`);
    // ...
  }
}
```

### üí°¬†**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ DI**

1. **–ì–∏–±–∫–æ—Å—Ç—å**¬†- –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –ø–æ–¥–º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä,¬†`FileLogger`¬†‚Üí¬†`DatabaseLogger`)
    
2. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**¬†- –õ–µ–≥–∫–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å mock-–æ–±—ä–µ–∫—Ç—ã –≤ —Ç–µ—Å—Ç–∞—Ö
    
3. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**¬†- –ö–ª–∞—Å—Å—ã –Ω–µ –∑–Ω–∞—é—Ç, –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    
4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**¬†- –ú–æ–∂–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
    

### üõ†¬†**–°–ø–æ—Å–æ–±—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

1. **–ß–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä**¬†(–Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π)

```js
constructor(private service: IService) {}
```

**–ß–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–∞ (—Å–µ—Ç—Ç–µ—Ä—ã)**

```js
set service(service: IService) { ... }
```

**–ß–µ—Ä–µ–∑ –º–µ—Ç–æ–¥**

```js
registerService(service: IService) { ... }
```

## üîÑ¬†**Inversion of Control (–ò–Ω–≤–µ—Ä—Å–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)**

**IoC**¬†‚Äî –±–æ–ª–µ–µ –æ–±—â–∏–π –ø—Ä–∏–Ω—Ü–∏–ø, —á–∞—Å—Ç—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è–µ—Ç—Å—è DI. –≠—Ç–æ –ø—Ä–∏–Ω—Ü–∏–ø, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –æ–±—ä–µ–∫—Ç–æ–≤ –≤—ã–Ω–æ—Å–∏—Ç—Å—è –≤–æ –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

### üìå¬†**–ü—Ä–∏–º–µ—Ä IoC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**


```js
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
const container = new Container();
container.bind<ILogger>(ILogger).to(FileLogger);
container.bind<UserService>(UserService).toSelf();

// –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
const userService = container.get(UserService);
```


### üí°¬†**–ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏ IoC**

1. **–ö–ª–∞—Å—Å—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**¬†‚Äî –æ–Ω–∏ –∏—Ö –ø–æ–ª—É—á–∞—é—Ç –∏–∑–≤–Ω–µ
    
2. **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º**¬†(—Å–∏–Ω–≥–ª—Ç–æ–Ω, transient –∏ —Ç.–¥.)
    
3. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ**¬†–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    

## ÔøΩ¬†**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ DI –∏ IoC**

|–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞|Dependency Injection|Inversion of Control|
|---|---|---|
|**–£—Ä–æ–≤–µ–Ω—å**|–ü–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è|–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø|
|**–°—É—Ç—å**|–°–ø–æ—Å–æ–± –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π|–ü—Ä–∏–Ω—Ü–∏–ø –≤—ã–Ω–µ—Å–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è|
|**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**|–ß–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä/—Å–µ—Ç—Ç–µ—Ä/–º–µ—Ç–æ–¥|–ß–µ—Ä–µ–∑ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã|

## üèÜ¬†**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**

1. **–õ–µ–≥–∫–∞—è –∑–∞–º–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π**

```js
// –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
if (env === 'test') {
  container.bind<ILogger>(ILogger).to(MockLogger);
} else {
  container.bind<ILogger>(ILogger).to(FileLogger);
}
```

2. **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

```js
test('UserService', () => {
  const mockLogger = new MockLogger();
  const service = new UserService(mockLogger);
  // –¢–µ—Å—Ç–∏—Ä—É–µ–º...
});
```

3. **–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞**

```js
// –í–º–µ—Å—Ç–æ
import { FileLogger } from './file-logger';

// –ò—Å–ø–æ–ª—å–∑—É–µ–º
import { ILogger } from './interfaces';
```


## üöÄ¬†**–í—ã–≤–æ–¥**

**DI**¬†‚Äî —ç—Ç–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–∞¬†**IoC**, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –î–µ–ª–∞—Ç—å –∫–æ–¥ –±–æ–ª–µ–µ –≥–∏–±–∫–∏–º –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º
    
- –£–º–µ–Ω—å—à–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
    
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
    

**–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**

1. –í—Å–µ–≥–¥–∞ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤), –∞ –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π
    
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DI —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±
    
3. –ü—Ä–∏–º–µ–Ω—è—Ç—å DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π